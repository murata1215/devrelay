# DevRelay ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆæ¦‚è¦

## ğŸ“‹ ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆçµŒç·¯

### ãã£ã‹ã‘
å¤–å‡ºå…ˆã‹ã‚‰ã‚¹ãƒãƒ›ã§è‡ªå®…ã®é–‹ç™ºãƒã‚·ãƒ³ã‚’æ“ä½œã—ãŸã„ã€‚æ—¢å­˜ã®Claude Code Remoteç­‰ã¯1ãƒã‚·ãƒ³å›ºå®šã§ã€è¤‡æ•°ãƒã‚·ãƒ³ãƒ»è¤‡æ•°ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆã®åˆ‡ã‚Šæ›¿ãˆãŒã§ããªã‹ã£ãŸã€‚

### ã‚³ãƒ³ã‚»ãƒ—ãƒˆ
**ã€Œã©ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚¢ãƒ—ãƒªã‹ã‚‰ã§ã‚‚ã€ã©ã®AI CLIã«ã§ã‚‚ç¹‹ãŒã‚‹ã€ãƒªãƒ¢ãƒ¼ãƒˆé–‹ç™ºãƒãƒ–ã€**

### æ±ºå®šäº‹é …ï¼ˆ2024å¹´1æœˆæ™‚ç‚¹ï¼‰

| é …ç›® | æ±ºå®šå†…å®¹ | ç†ç”± |
|------|---------|------|
| ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£ | ãƒ¢ãƒãƒ¬ãƒï¼ˆpnpm workspaceï¼‰ | Server/Agenté–“ã§å‹å…±æœ‰ãŒå¿…è¦ |
| ã‚µãƒ¼ãƒãƒ¼ | Fastify + WebSocket | è»½é‡ãƒ»é«˜é€Ÿ |
| DB | SQLiteï¼ˆMVPï¼‰â†’ PostgreSQLï¼ˆæœ¬ç•ªï¼‰ | é–‹ç™ºåŠ¹ç‡å„ªå…ˆ |
| ORM | Prisma | å‹å®‰å…¨ã€ãƒã‚¤ã‚°ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³å®¹æ˜“ |
| ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ³ã‚° | Discordå„ªå…ˆ â†’ Telegram â†’ LINE | ç„¡æ–™ãƒ»ã‚°ãƒ­ãƒ¼ãƒãƒ«å„ªå…ˆ |
| Agent | Node.js + TypeScript | Serverã¨è¨€èªçµ±ä¸€ |
| Windows Agent | åˆ¥ãƒªãƒã‚¸ãƒˆãƒª | ç’°å¢ƒãŒå¤§ããç•°ãªã‚‹ |

---

## ğŸ— ã‚¢ãƒ¼ã‚­ãƒ†ã‚¯ãƒãƒ£

```
ğŸ“± Messaging Apps          â˜ï¸ Center Server (VPS)        ğŸ–¥ï¸ Work Machines
â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”          â”Œâ”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”
â”‚ Discord      â”‚          â”‚              â”‚          â”‚ ubuntu01     â”‚
â”‚ Telegram     â”‚ â†â”€â”€â”€â”€â”€â”€â†’ â”‚ DevRelay    â”‚ â†â”€â”€â”€â”€â”€â”€â†’ â”‚ ubuntu02     â”‚
â”‚ LINE         â”‚  HTTPS   â”‚ Server       â”‚    WS    â”‚ windows01    â”‚
â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
                                 â”‚                         â”‚
                          â”Œâ”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”         â”Œâ”€â”€â”€â”€â”€â”€â”€â”´â”€â”€â”€â”€â”€â”€â”€â”€â”
                          â”‚ SQLite/     â”‚         â”‚ Claude Code    â”‚
                          â”‚ PostgreSQL  â”‚         â”‚ Gemini CLI     â”‚
                          â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜         â”‚ Codex / Aider  â”‚
                                                  â””â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”€â”˜
```

### é€šä¿¡ãƒ•ãƒ­ãƒ¼

```
1. User â†’ Discord/Telegram â†’ Server (HTTPS)
2. Server â†’ Agent (WebSocket)
3. Agent â†’ AI CLI (stdin/stdout)
4. AI CLI â†’ Agent â†’ Server â†’ Discord/Telegram â†’ User
```

---

## ğŸ“¦ ãƒªãƒã‚¸ãƒˆãƒªæ§‹æˆ

### ãƒ¡ã‚¤ãƒ³ãƒªãƒã‚¸ãƒˆãƒªï¼ˆdevrelayï¼‰
```
devrelay/
â”œâ”€â”€ apps/
â”‚   â”œâ”€â”€ server/           # ä¸­å¤®ã‚µãƒ¼ãƒãƒ¼
â”‚   â””â”€â”€ web/              # Web UIï¼ˆå°†æ¥ï¼‰
â”œâ”€â”€ packages/
â”‚   â””â”€â”€ shared/           # å…±é€šå‹ãƒ»å®šæ•°
â”œâ”€â”€ agents/
â”‚   â””â”€â”€ linux/            # Linux Agent
â”œâ”€â”€ scripts/
â”‚   â””â”€â”€ install.sh        # ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©
â””â”€â”€ docs/                 # ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ
```

### åˆ¥ãƒªãƒã‚¸ãƒˆãƒªï¼ˆWindows Agentï¼‰
```
devrelay-agent-windows/
â”œâ”€â”€ src/                  # Windows Agent
â”œâ”€â”€ installer/            # MSI/ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ©
â””â”€â”€ tray/                 # ã‚·ã‚¹ãƒ†ãƒ ãƒˆãƒ¬ã‚¤ã‚¢ãƒ—ãƒª
```

---

## ğŸ“Š é–‹ç™ºãƒ•ã‚§ãƒ¼ã‚º

### Phase 1: MVPï¼ˆç¾åœ¨ï¼‰âœ… 80%å®Œäº†
- [x] å…±é€šå‹å®šç¾©ï¼ˆsharedï¼‰
- [x] ã‚µãƒ¼ãƒãƒ¼åŸºç›¤ï¼ˆFastify + WebSocketï¼‰
- [x] Discord Bot
- [x] ã‚³ãƒãƒ³ãƒ‰ãƒ‘ãƒ¼ã‚µãƒ¼ãƒ»ãƒãƒ³ãƒ‰ãƒ©ãƒ¼
- [x] Linux AgentåŸºç›¤
- [x] CLIï¼ˆsetup, status, projects, start, logsï¼‰
- [x] install.sh
- [ ] ä¾å­˜é–¢ä¿‚ã‚¤ãƒ³ã‚¹ãƒˆãƒ¼ãƒ«ãƒ»å‹•ä½œãƒ†ã‚¹ãƒˆ
- [ ] Discord Botå®Ÿæ©Ÿãƒ†ã‚¹ãƒˆ

### Phase 2: æ‹¡å¼µ
- [ ] Telegram Bot
- [ ] LINE Bot
- [ ] Stripeèª²é‡‘é€£æº
- [ ] Windows Agent

### Phase 3: ç£¨ãè¾¼ã¿
- [ ] Web UIï¼ˆãƒ€ãƒƒã‚·ãƒ¥ãƒœãƒ¼ãƒ‰ï¼‰
- [ ] AIè¦ç´„æ©Ÿèƒ½
- [ ] ãƒãƒ¼ãƒ æ©Ÿèƒ½
- [ ] å±é™ºã‚³ãƒãƒ³ãƒ‰æ¤œçŸ¥

---

## ğŸ’° æ–™é‡‘ãƒ—ãƒ©ãƒ³ï¼ˆè¨­è¨ˆï¼‰

| | Free | Pro | Team |
|--|------|-----|------|
| æ–™é‡‘ | $0 | $5/æœˆ | $20/æœˆ |
| ãƒã‚·ãƒ³æ•° | 1 | 5 | ç„¡åˆ¶é™ |
| ãƒ—ãƒ©ãƒƒãƒˆãƒ•ã‚©ãƒ¼ãƒ  | 1ã¤ | å…¨éƒ¨ | å…¨éƒ¨ |
| ãƒ­ã‚°ä¿æŒ | 7æ—¥ | 30æ—¥ | 90æ—¥ |
| è¦ç´„æ©Ÿèƒ½ | âŒ | âœ… | âœ… |
| ãƒãƒ¼ãƒ æ©Ÿèƒ½ | âŒ | âŒ | âœ… |

---

## ğŸ”§ æŠ€è¡“ã‚¹ã‚¿ãƒƒã‚¯

| ã‚³ãƒ³ãƒãƒ¼ãƒãƒ³ãƒˆ | æŠ€è¡“ |
|--------------|------|
| Server | Fastify, @fastify/websocket |
| DB | Prisma + SQLite/PostgreSQL |
| Discord | discord.js v14 |
| Agent | Node.js 20+, TypeScript |
| Build | pnpm, tsx |
| Service | systemd (Linux) |

---

## ğŸ“ é‡è¦ãªè¨­è¨ˆãƒ¡ãƒ¢

### WebSocketãƒ—ãƒ­ãƒˆã‚³ãƒ«

**Agent â†’ Server:**
- `agent:connect` - æ¥ç¶šãƒ»èªè¨¼
- `agent:disconnect` - åˆ‡æ–­
- `agent:projects` - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§æ›´æ–°
- `agent:ai:output` - AIå‡ºåŠ›è»¢é€
- `agent:ai:status` - AIã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹å¤‰æ›´

**Server â†’ Agent:**
- `server:connect:ack` - æ¥ç¶šç¢ºèª
- `server:session:start` - ã‚»ãƒƒã‚·ãƒ§ãƒ³é–‹å§‹
- `server:session:end` - ã‚»ãƒƒã‚·ãƒ§ãƒ³çµ‚äº†
- `server:ai:prompt` - AIã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

### ãƒ¦ãƒ¼ã‚¶ãƒ¼ã‚³ãƒãƒ³ãƒ‰
```
m       - ãƒã‚·ãƒ³ä¸€è¦§
p       - ãƒ—ãƒ­ã‚¸ã‚§ã‚¯ãƒˆä¸€è¦§
s       - ã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹
r       - ç›´è¿‘ã®ä½œæ¥­
1,2,3   - é¸æŠ
log     - ãƒ­ã‚°
sum     - è¦ç´„
q       - åˆ‡æ–­
h       - ãƒ˜ãƒ«ãƒ—
```
ä¸Šè¨˜ä»¥å¤– â†’ AIã¸ã®ãƒ—ãƒ­ãƒ³ãƒ—ãƒˆ

---

## ğŸ”— é–¢é€£ãƒªã‚½ãƒ¼ã‚¹

- è¨­è¨ˆãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆ: `docs/`
- ã‚µãƒ¼ãƒãƒ¼æ¦‚è¦: `devrelay-overview.md`
- DB ã‚¹ã‚­ãƒ¼ãƒ: `apps/server/prisma/schema.prisma`
- å‹å®šç¾©: `packages/shared/src/types.ts`
